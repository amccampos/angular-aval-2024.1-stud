"use strict";(self.webpackChunkangular_aval_2024_1=self.webpackChunkangular_aval_2024_1||[]).push([[439],{"./src/app/components/ranking.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{i:()=>RankingComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),match_service=__webpack_require__("./src/app/services/match.service.ts"),team_service=__webpack_require__("./src/app/services/team.service.ts");let RankingService=class RankingService{constructor(){this.matchesService=(0,core.inject)(match_service.T),this.teamsService=(0,core.inject)(team_service.n),this.sorted=(0,core.computed)((()=>{const dic=new Map;return this.teamsService.teams.forEach((team=>dic.set(team.id,{pt:0,jg:0,vi:0,em:0,de:0,gp:0,gc:0,sg:0}))),this.matchesService.matches().forEach((match=>{if(match.score){const teamA=dic.get(match.teams[0]),teamB=dic.get(match.teams[1]);teamA&&teamB&&(match.score[0]===match.score[1]?(this.draw(teamA,match.score[0]),this.draw(teamB,match.score[0])):match.score[0]>match.score[1]?(this.win(teamA,match.score[0],match.score[1]),this.lose(teamB,match.score[1],match.score[0])):(this.win(teamB,match.score[1],match.score[0]),this.lose(teamA,match.score[0],match.score[1])))}})),[...dic].sort(this.compareTeams)}))}win(team,gp,gc){team.pt+=3,team.jg++,team.vi++,team.gp+=gp,team.gc+=gc,team.sg=team.gp-team.gc}lose(team,gp,gc){team.jg++,team.de++,team.gp+=gp,team.gc+=gc,team.sg=team.gp-team.gc}draw(team,goals){team.pt++,team.jg++,team.em++,team.gp+=goals,team.gc+=goals}compareTeams(a,b){const teamA=a[1],teamB=b[1];return teamA.pt!==teamB.pt?teamB.pt-teamA.pt:teamA.sg!==teamB.sg?teamB.sg-teamA.sg:teamA.gp!==teamB.gp?teamB.gp-teamA.gp:Math.random()-.5}};RankingService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],RankingService);var team_component=__webpack_require__("./src/app/components/team.component.ts");let RankingComponent=class RankingComponent{constructor(){this.ranking=(0,core.inject)(RankingService),this.sorted=this.ranking.sorted}};RankingComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"ranking",standalone:!0,imports:[team_component.X],template:'\n    <div>\n      <h2>Classificação</h2>\n      <table>\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Equipe</th>\n            <th>Pt</th>\n            <th>Jg</th>\n            <th>Vi</th>\n            <th>Em</th>\n            <th>De</th>\n            <th>Gp</th>\n            <th>Gc</th>\n            <th>Sg</th>\n          </tr>\n        </thead>\n        <tbody>\n          @for (elm of sorted(); track elm[0]) {\n            <tr class="t-right">\n              <td>{{ $index + 1 }}</td>\n              <td><team [id]="elm[0]" flag="left" /></td>\n              <td>{{ elm[1].pt }}</td>\n              <td>{{ elm[1].jg }}</td>\n              <td>{{ elm[1].vi }}</td>\n              <td>{{ elm[1].em }}</td>\n              <td>{{ elm[1].de }}</td>\n              <td>{{ elm[1].gp }}</td>\n              <td>{{ elm[1].gc }}</td>\n              <td>{{ elm[1].sg }}</td>\n            </tr>\n          }\n        </tbody>\n      </table>\n    </div>\n  '})],RankingComponent)},"./src/app/components/team.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{X:()=>TeamComponent});var tslib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_services_team_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/app/services/team.service.ts");let TeamComponent=class TeamComponent{constructor(){this.service=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.inject)(_services_team_service__WEBPACK_IMPORTED_MODULE_0__.n),this.id=_angular_core__WEBPACK_IMPORTED_MODULE_1__.input.required(),this.flag=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.input)(),this.team=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.computed)((()=>this.service.getById(this.id()))),this.flagSrc=(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.computed)((()=>`/flags/${this.team()?.flag}`))}static#_=this.propDecorators={id:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input,args:[{isSignal:!0,alias:"id",required:!0,transform:void 0}]}],flag:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_1__.Input,args:[{isSignal:!0,alias:"flag",required:!1,transform:void 0}]}]}};TeamComponent=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_1__.Component)({selector:"team",standalone:!0,template:'\n    <div class="flex align-center w-fixed" [style]="{ flexDirection: flag() === \'left\' ? \'row\' : \'row-reverse\'}">\n      @if (flag()) {\n        <img [src]="flagSrc()" width="20" height="20" class="mx-5" />\n      }\n      <span>{{ team()?.name }}</span>\n    </div>  \n  '})],TeamComponent)},"./src/app/services/match.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{T:()=>MatchService});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");const matches_namespaceObject=JSON.parse('[{"teams":["int","bah"],"round":1},{"teams":["cru","bot"],"round":1},{"teams":["vit","pal"],"round":1},{"teams":["flu","rbb"],"round":1},{"teams":["vas","gre"],"round":1},{"teams":["cor","cam"],"round":1},{"teams":["sao","for"],"round":1},{"teams":["cap","cui"],"round":1},{"teams":["acg","fla"],"round":1},{"teams":["cri","juv"],"round":1},{"teams":["gre","cap"],"round":2},{"teams":["cam","cri"],"round":2},{"teams":["bah","flu"],"round":2},{"teams":["fla","sao"],"round":2},{"teams":["bot","acg"],"round":2},{"teams":["pal","int"],"round":2},{"teams":["rbb","vas"],"round":2},{"teams":["for","cru"],"round":2},{"teams":["cui","vit"],"round":2},{"teams":["juv","cor"],"round":2},{"teams":["cri","for"],"round":3},{"teams":["rbb","cor"],"round":3},{"teams":["cam","cru"],"round":3},{"teams":["vit","bah"],"round":3},{"teams":["bot","juv"],"round":3},{"teams":["flu","vas"],"round":3},{"teams":["gre","cui"],"round":3},{"teams":["pal","fla"],"round":3},{"teams":["cap","int"],"round":3},{"teams":["acg","sao"],"round":3},{"teams":["vas","cri"],"round":4},{"teams":["bah","gre"],"round":4},{"teams":["cru","vit"],"round":4},{"teams":["for","rbb"],"round":4},{"teams":["int","acg"],"round":4},{"teams":["cui","cam"],"round":4},{"teams":["fla","bot"],"round":4},{"teams":["cor","flu"],"round":4},{"teams":["juv","cap"],"round":4},{"teams":["sao","pal"],"round":4}]');let MatchService=class MatchService{constructor(){this.matches=(0,core.signal)(matches_namespaceObject)}getMatch(teamA,teamB){return this.matches().find((match=>match.teams[0]===teamA&&match.teams[1]===teamB))}getRoundMatches(round){return this.matches().filter((match=>match.round===round))}getMaxRounds(){return this.matches().reduce(((prev,curr)=>curr.round>prev?curr.round:prev),0)}updateScore(match){this.matches.update((matches=>{const idx=matches.findIndex((m=>m.teams[0]===match.teams[0]&&m.teams[1]===match.teams[1]));return[...matches.slice(0,idx),match,...matches.slice(idx+1)]}))}};MatchService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],MatchService)},"./src/app/services/team.service.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>TeamService});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs");const teams_namespaceObject=JSON.parse('[{"id":"cap","name":"Athlético-PR","flag":"athletico-pr.svg"},{"id":"acg","name":"Atlético-GO","flag":"atletico-go.svg"},{"id":"cam","name":"Atlético-MG","flag":"atletico-mg.svg"},{"id":"bah","name":"Bahia","flag":"bahia.svg"},{"id":"bot","name":"Botafogo","flag":"botafogo.svg"},{"id":"rbb","name":"Bragantino","flag":"bragantino.svg"},{"id":"cor","name":"Corinthians","flag":"corinthians.svg"},{"id":"cri","name":"Criciúma","flag":"criciuma.svg"},{"id":"cru","name":"Cruzeiro","flag":"cruzeiro.svg"},{"id":"cui","name":"Cuiabá","flag":"cuiaba.svg"},{"id":"fla","name":"Flamengo","flag":"flamengo.svg"},{"id":"flu","name":"Fluminense","flag":"fluminense.svg"},{"id":"for","name":"Fortaleza","flag":"fortaleza.svg"},{"id":"gre","name":"Grêmio","flag":"gremio.svg"},{"id":"int","name":"Internacional","flag":"internacional.svg"},{"id":"juv","name":"Juventude","flag":"juventude.svg"},{"id":"pal","name":"Palmeiras","flag":"palmeiras.svg"},{"id":"sao","name":"São Paulo","flag":"sao-paulo.svg"},{"id":"vas","name":"Vasco","flag":"vasco.svg"},{"id":"vit","name":"Vitória","flag":"vitoria.svg"}]');let TeamService=class TeamService{constructor(){this.teams=teams_namespaceObject}getById(id){return this.teams?.find((t=>t.id===id))}};TeamService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"})],TeamService)},"./src/stories/ranking.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={title:"Lib/Ranking",component:__webpack_require__("./src/app/components/ranking.component.ts").i},Default={};Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{}",...Default.parameters?.docs?.source}}};const __namedExportsOrder=["Default"]}}]);